#include "keyboard.h"

uint8_t key_buffer = 0;

uint8_t shift = 0;
uint8_t capslock = 0;

uint8_t scancode_to_ascii[] = {
    
//  0x0  0x1  0x2  0x3  0x4   0x5  0x6  0x7   0x8   0x9  0xa  0xb   0xc   0xd  0xe   0xf
    0x0, 0x0, '1', '2', '3',  '4', '5', '6',  '7',  '8', '9', '0',  '-',  '=', '\b', '\t', // 0x00
    'q', 'w', 'e', 'r', 't',  'y', 'u', 'i',  'o',  'p', '[', ']',  '\n', 0x0, 'a',  's',  // 0x10
    'd', 'f', 'g', 'h', 'j',  'k', 'l', ';',  '\'', '`', 0x0, '\\', 'z',  'x', 'c',  'v',  // 0x20
    'b', 'n', 'm', ',', '.',  '/', 0x0, '*',  0x0,  ' ', 0x0, 0x0,  0x0,  0x0, 0x0,  0x0,  // 0x30
    0x0, 0x0, 0x0, 0x0, 0x11, 0x0, 0x0, '7',  '8',  '9', '-', '4',  '5',  '6', '+',  '1',  // 0x40
    '2', '3', '0', 0x0, 0x0,  0x0, 0x0, 0x12, 0x0,  0x0, 0x0, 0x0,  0x0,  0x0, 0x0,  0x0,  // 0x50
    0x0, 0x0, 0x0, 0x0, 0x0,  0x0, 0x0, 0x0,  0x0,  0x0, 0x0, 0x0,  0x0,  0x0, 0x0,  0x0,  // 0x60
    0x0, 0x0, 0x0, 0x0, 0x0,  0x0, 0x0, 0x0,  0x0,  0x0, 0x0, 0x0,  0x0,  0x0, 0x0,  0x0,  // 0x70
    0x0, 0x0, 0x0, 0x0, 0x0,  0x0, 0x0, 0x0,  0x0,  0x0, 0x0, 0x0,  0x0,  0x0, 0x0,  0x0,  // 0x80
    0x0, 0x0, 0x0, 0x0, 0x0,  0x0, 0x0, 0x0,  0x0,  0x0, 0x0, 0x0,  0x0,  0x0, 0x0,  0x0,  // 0x90
    0x0, 0x0, 0x0, 0x0, 0x0,  0x0, 0x0, 0x0,  0x0,  0x0, 0x0, 0x0,  0x0,  0x0, 0x0,  0x0,  // 0xa0
    0x0, 0x0, 0x0, 0x0, 0x0,  0x0, 0x0, 0x0,  0x0,  0x0, 0x0, 0x0,  0x0,  0x0, 0x0,  0x0,  // 0xb0
    0x0, 0x0, 0x0, 0x0, 0x0,  0x0, 0x0, 0x0,  0x0,  0x0, 0x0, 0x0,  0x0,  0x0, 0x0,  0x0,  // 0xc0
    0x0, 0x0, 0x0, 0x0, 0x0,  0x0, 0x0, 0x0,  0x0,  0x0, 0x0, 0x0,  0x0,  0x0, 0x0,  0x0,  // 0xd0
    0x0, 0x0, 0x0, 0x0, 0x0,  0x0, 0x0, 0x0,  0x0,  0x0, 0x0, 0x0,  0x0,  0x0, 0x0,  0x0,  // 0xe0
    0x0, 0x0, 0x0, 0x0, 0x0,  0x0, 0x0, 0x0,  0x0,  0x0, 0x0, 0x0,  0x0,  0x0, 0x0         // 0xf0
    
};

uint8_t scancode_to_ascii_shift[] = {
    
//  0x0  0x1  0x2  0x3  0x4  0x5  0x6  0x7  0x8  0x9  0xa  0xb  0xc   0xd  0xe   0xf
    0x0, 0x0, '!', '@', '#', '$', '%', '^', '&', '*', '(', ')', '_',  '+', '\b', '\t', // 0x00
    'Q', 'W', 'E', 'R', 'T', 'Y', 'U', 'I', 'O', 'P', '{', '}', '\n', 0x0, 'A',  'S',  // 0x10
    'D', 'F', 'G', 'H', 'J', 'K', 'L', ':', '"', '~', 0x0, '|', 'Z',  'X', 'C',  'V',  // 0x20
    'B', 'N', 'M', '<', '>', '?', 0x0, 0x0, 0x0, ' ', 0x0, 0x0, 0x0,  0x0, 0x0,  0x0,  // 0x30
    0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, '&', '*', '(', '_', '$', '%',  '^', '+',  '!',  // 0x40
    '@', '#', ')', 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,  0x0, 0x0,  0x0,  // 0x50
    0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,  0x0, 0x0,  0x0,  // 0x60
    0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,  0x0, 0x0,  0x0,  // 0x70
    0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,  0x0, 0x0,  0x0,  // 0x80
    0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,  0x0, 0x0,  0x0,  // 0x90
    0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,  0x0, 0x0,  0x0,  // 0xa0
    0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,  0x0, 0x0,  0x0,  // 0xb0
    0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,  0x0, 0x0,  0x0,  // 0xc0
    0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,  0x0, 0x0,  0x0,  // 0xd0
    0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,  0x0, 0x0,  0x0,  // 0xe0
    0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,  0x0, 0x0         // 0xf0
    
};

uint8_t scancode_to_ascii_capslock[] = {
    
//  0x0  0x1  0x2  0x3  0x4   0x5  0x6  0x7   0x8   0x9  0xa  0xb   0xc   0xd  0xe   0xf
    0x0, 0x0, '1', '2', '3',  '4', '5', '6',  '7',  '8', '9', '0',  '-',  '=', '\b', '\t', // 0x00
    'Q', 'W', 'E', 'R', 'T',  'Y', 'U', 'I',  'O',  'P', '[', ']',  '\n', 0x0, 'A',  'S',  // 0x10
    'D', 'F', 'G', 'H', 'J',  'K', 'L', ';',  '\'', '`', 0x0, '\\', 'Z',  'X', 'C',  'V',  // 0x20
    'B', 'N', 'M', ',', '.',  '/', 0x0, '*',  0x0,  ' ', 0x0, 0x0,  0x0,  0x0, 0x0,  0x0,  // 0x30
    0x0, 0x0, 0x0, 0x0, 0x11, 0x0, 0x0, '7',  '8',  '9', '-', '4',  '5',  '6', '+',  '1',  // 0x40
    '2', '3', '0', 0x0, 0x0,  0x0, 0x0, 0x12, 0x0,  0x0, 0x0, 0x0,  0x0,  0x0, 0x0,  0x0,  // 0x50
    0x0, 0x0, 0x0, 0x0, 0x0,  0x0, 0x0, 0x0,  0x0,  0x0, 0x0, 0x0,  0x0,  0x0, 0x0,  0x0,  // 0x60
    0x0, 0x0, 0x0, 0x0, 0x0,  0x0, 0x0, 0x0,  0x0,  0x0, 0x0, 0x0,  0x0,  0x0, 0x0,  0x0,  // 0x70
    0x0, 0x0, 0x0, 0x0, 0x0,  0x0, 0x0, 0x0,  0x0,  0x0, 0x0, 0x0,  0x0,  0x0, 0x0,  0x0,  // 0x80
    0x0, 0x0, 0x0, 0x0, 0x0,  0x0, 0x0, 0x0,  0x0,  0x0, 0x0, 0x0,  0x0,  0x0, 0x0,  0x0,  // 0x90
    0x0, 0x0, 0x0, 0x0, 0x0,  0x0, 0x0, 0x0,  0x0,  0x0, 0x0, 0x0,  0x0,  0x0, 0x0,  0x0,  // 0xa0
    0x0, 0x0, 0x0, 0x0, 0x0,  0x0, 0x0, 0x0,  0x0,  0x0, 0x0, 0x0,  0x0,  0x0, 0x0,  0x0,  // 0xb0
    0x0, 0x0, 0x0, 0x0, 0x0,  0x0, 0x0, 0x0,  0x0,  0x0, 0x0, 0x0,  0x0,  0x0, 0x0,  0x0,  // 0xc0
    0x0, 0x0, 0x0, 0x0, 0x0,  0x0, 0x0, 0x0,  0x0,  0x0, 0x0, 0x0,  0x0,  0x0, 0x0,  0x0,  // 0xd0
    0x0, 0x0, 0x0, 0x0, 0x0,  0x0, 0x0, 0x0,  0x0,  0x0, 0x0, 0x0,  0x0,  0x0, 0x0,  0x0,  // 0xe0
    0x0, 0x0, 0x0, 0x0, 0x0,  0x0, 0x0, 0x0,  0x0,  0x0, 0x0, 0x0,  0x0,  0x0, 0x0         // 0xf0
    
};

uint8_t scancode_to_ascii_capslock_shift[] = {
    
//  0x0  0x1  0x2  0x3  0x4  0x5  0x6  0x7  0x8  0x9  0xa  0xb  0xc   0xd  0xe   0xf
    0x0, 0x0, '!', '@', '#', '$', '%', '^', '&', '*', '(', ')', '_',  '+', '\b', '\t', // 0x00
    'q', 'w', 'e', 'r', 't', 'y', 'u', 'i', 'o', 'p', '{', '}', '\n', 0x0, 'a',  's',  // 0x10
    'd', 'f', 'g', 'h', 'j', 'k', 'l', ':', '"', '~', 0x0, '|', 'z',  'x', 'c',  'v',  // 0x20
    'b', 'n', 'm', '<', '>', '?', 0x0, 0x0, 0x0, ' ', 0x0, 0x0, 0x0,  0x0, 0x0,  0x0,  // 0x30
    0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, '&', '*', '(', '_', '$', '%',  '^', '+',  '!',  // 0x40
    '@', '#', ')', 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,  0x0, 0x0,  0x0,  // 0x50
    0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,  0x0, 0x0,  0x0,  // 0x60
    0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,  0x0, 0x0,  0x0,  // 0x70
    0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,  0x0, 0x0,  0x0,  // 0x80
    0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,  0x0, 0x0,  0x0,  // 0x90
    0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,  0x0, 0x0,  0x0,  // 0xa0
    0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,  0x0, 0x0,  0x0,  // 0xb0
    0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,  0x0, 0x0,  0x0,  // 0xc0
    0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,  0x0, 0x0,  0x0,  // 0xd0
    0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,  0x0, 0x0,  0x0,  // 0xe0
    0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,  0x0, 0x0         // 0xf0
    
};
